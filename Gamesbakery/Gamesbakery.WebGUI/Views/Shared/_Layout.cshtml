@using Gamesbakery.WebGUI.Extensions
<!DOCTYPE html>
<html>
<head>
    <title>Gamesbakery</title>
    <link href="~/lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
        <a class="navbar-brand" href="/">Gamesbakery</a>
        <div class="navbar-nav">
            <a class="nav-link" asp-controller="Game" asp-action="Index">Игры</a>
            @if (User.Identity.IsAuthenticated)
            {
                <a class="nav-link" asp-controller="Cart" asp-action="Index">Корзина</a>
                <a class="nav-link" asp-controller="Order" asp-action="Index">Заказы</a>
                @if (User.IsInRole("Admin"))
                {
                    <a class="nav-link" asp-controller="OrderItem" asp-action="Index">Товары</a>
                }
                <span class="navbar-text">
                    @User.Identity.Name 
                    @{
                        var role = ViewContext.HttpContext.User.GetRole();
                    }
                    <span class="badge badge-primary">(@role)</span>
                </span>
                <form asp-controller="Account" asp-action="Logout" method="post" class="form-inline">
                    <button type="submit" class="nav-link btn btn-link">Выйти</button>
                </form>
            }
            else
            {
                <a class="nav-link" asp-controller="Account" asp-action="Login">Вход</a>
                <a class="nav-link" asp-controller="User" asp-action="Register">Регистрация</a>
            }
        </div>
    </nav>

    <div class="container">
        @RenderBody()
    </div>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>